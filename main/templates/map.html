{% extends 'base.html' %}
{% load staticfiles %}

{% block js %}

<!-- Если вы используете API локально, то в URL ресурса необходимо указывать протокол в стандартном виде (http://...)-->
    <script src="http://api-maps.yandex.ru/2.1/?lang=ru-RU" language="javascript" type="text/javascript"></script>
{#    <script src="http://yandex.st/jquery/2.1.0/jquery.min.js" language="javascript" type="text/javascript"></script>#}
<script type="application/javascript">

ymaps.ready(init);

function init () {
    var myMap = new ymaps.Map('map', {
            center: [55.76, 37.64],
            zoom: 10
        }, {
            searchControlProvider: 'yandex#search'
        });
    {% for store_house in store_houses %}
        myMap.geoObjects
            .add(new ymaps.Placemark([{{ store_house.geography_point.x }}, {{ store_house.geography_point.y }}], {
                balloonContent: '{{ store_house.geography_point.address }}'
            }, {
                preset: 'islands#icon',
                iconColor: '#0095b6'
            }));
    {% endfor %}
}
</script>
{% endblock %}

{% block title %}
    <h3 class="title_list">МАПА</h3>
{% endblock %}

{% block content %}
<style>
    #map {
        display: block;

        width: 1000px;
        height: 600px;
        padding: 0;
        margin: 0;
    }
</style>
<div id="map">

</div>
{% endblock %}
